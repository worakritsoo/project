var t=Object.defineProperty,e=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,a=(e,o,n)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,s=(t,s)=>{for(var r in s||(s={}))e.call(s,r)&&a(t,r,s[r]);if(o)for(var r of o(s))n.call(s,r)&&a(t,r,s[r]);return t};import{K as r,S as l,i as c,s as i,e as d,k as u,c as f,a as h,n as p,d as m,b as v,E as y,f as g,F as w,L as b,M as j,N as x,O as E,P as O,Q as T,t as M,J as P,g as $,R as _,u as k,v as N,r as U,T as F,B as I,U as R,C as B}from"../../chunks/index-befac657.js";function D(t){const e=t-1;return e*e*e+1}function S(t,{pending:e,error:o,result:n}){let a;async function s(s){const r=a={};s.preventDefault();const l=new FormData(t);e&&e(l,t);try{const e=await fetch(t.action,{method:t.method,headers:{accept:"application/json"},body:l});if(r!==a)return;e.ok?n(e,t):o?o(e,null,t):console.error(await e.text())}catch(c){if(!o)throw c;o(null,c,t)}}return t.addEventListener("submit",s),{destroy(){t.removeEventListener("submit",s)}}}function C(t,{delay:e=0,duration:o=400,easing:n=D,start:a=0,opacity:s=0}={}){const r=getComputedStyle(t),l=+r.opacity,c="none"===r.transform?"":r.transform,i=1-a,d=l*(1-s);return{delay:e,duration:o,easing:n,css:(t,e)=>`\n\t\t\ttransform: ${c} scale(${1-i*e});\n\t\t\topacity: ${l-d*e}\n\t\t`}}function L(t,e,o={}){const n=getComputedStyle(t),a="none"===n.transform?"":n.transform,s=e.from.width/t.clientWidth,l=e.from.height/t.clientHeight,c=(e.from.left-e.to.left)/s,i=(e.from.top-e.to.top)/l,d=Math.sqrt(c*c+i*i),{delay:u=0,duration:f=(t=>120*Math.sqrt(t)),easing:h=D}=o;return{delay:u,duration:r(f)?f(d):f,easing:h,css:(t,e)=>`transform: ${a} translate(${e*c}px, ${e*i}px);`}}function q(t,e,o){const n=t.slice();return n[6]=e[o],n}function H(t,e){let o,n,a,s,l,c,i,M,P,$,_,k,N,U,I,R,D,q,H,V,J,K,Q,W,z,A,G,X=B;function Y(...t){return e[3](e[6],...t)}function Z(){return e[4](e[6])}return{key:t,first:null,c(){o=d("div"),n=d("form"),a=d("input"),l=u(),c=d("button"),$=u(),_=d("form"),k=d("input"),U=u(),I=d("button"),D=u(),q=d("form"),H=d("button"),K=u(),this.h()},l(t){o=f(t,"DIV",{class:!0});var e=h(o);n=f(e,"FORM",{action:!0,method:!0});var s=h(n);a=f(s,"INPUT",{type:!0,name:!0,value:!0,class:!0}),l=p(s),c=f(s,"BUTTON",{class:!0,"aria-label":!0}),h(c).forEach(m),s.forEach(m),$=p(e),_=f(e,"FORM",{class:!0,action:!0,method:!0});var r=h(_);k=f(r,"INPUT",{type:!0,name:!0,value:!0,class:!0}),U=p(r),I=f(r,"BUTTON",{class:!0,"aria-label":!0}),h(I).forEach(m),r.forEach(m),D=p(e),q=f(e,"FORM",{action:!0,method:!0});var i=h(q);H=f(i,"BUTTON",{class:!0,"aria-label":!0}),h(H).forEach(m),i.forEach(m),K=p(e),e.forEach(m),this.h()},h(){v(a,"type","hidden"),v(a,"name","done"),a.value=s=e[6].done?"":"true",v(a,"class","svelte-13wdnuf"),v(c,"class","toggle svelte-13wdnuf"),v(c,"aria-label",i="Mark todo as "+(e[6].done?"not done":"done")),v(n,"action",M="/todos/"+e[6].uid+".json?_method=patch"),v(n,"method","post"),v(k,"type","text"),v(k,"name","text"),k.value=N=e[6].text,v(k,"class","svelte-13wdnuf"),v(I,"class","save svelte-13wdnuf"),v(I,"aria-label","Save todo"),v(_,"class","text svelte-13wdnuf"),v(_,"action",R="/todos/"+e[6].uid+".json?_method=patch"),v(_,"method","post"),v(H,"class","delete svelte-13wdnuf"),v(H,"aria-label","Delete todo"),v(q,"action",V="/todos/"+e[6].uid+".json?_method=delete"),v(q,"method","post"),v(o,"class","todo svelte-13wdnuf"),y(o,"done",e[6].done),this.first=o},m(t,s){g(t,o,s),w(o,n),w(n,a),w(n,l),w(n,c),w(o,$),w(o,_),w(_,k),w(_,U),w(_,I),w(o,D),w(o,q),w(q,H),w(o,K),z=!0,A||(G=[b(P=S.call(null,n,{pending:Y,result:e[1]})),b(S.call(null,_,{result:e[1]})),b(J=S.call(null,q,{result:Z}))],A=!0)},p(t,l){e=t,(!z||1&l&&s!==(s=e[6].done?"":"true"))&&(a.value=s),(!z||1&l&&i!==(i="Mark todo as "+(e[6].done?"not done":"done")))&&v(c,"aria-label",i),(!z||1&l&&M!==(M="/todos/"+e[6].uid+".json?_method=patch"))&&v(n,"action",M),P&&r(P.update)&&1&l&&P.update.call(null,{pending:Y,result:e[1]}),(!z||1&l&&N!==(N=e[6].text)&&k.value!==N)&&(k.value=N),(!z||1&l&&R!==(R="/todos/"+e[6].uid+".json?_method=patch"))&&v(_,"action",R),(!z||1&l&&V!==(V="/todos/"+e[6].uid+".json?_method=delete"))&&v(q,"action",V),J&&r(J.update)&&1&l&&J.update.call(null,{result:Z}),1&l&&y(o,"done",e[6].done)},r(){W=o.getBoundingClientRect()},f(){j(o),X(),x(o,W)},a(){X(),X=E(o,W,L,{duration:200})},i(t){z||(t&&F((()=>{Q||(Q=O(o,C,{start:.7},!0)),Q.run(1)})),z=!0)},o(t){t&&(Q||(Q=O(o,C,{start:.7},!1)),Q.run(0)),z=!1},d(t){t&&m(o),t&&Q&&Q.end(),A=!1,T(G)}}}function V(t){let e,o,n,a,s,l,c,i,y,j,x,E,O=[],T=new Map,F=t[0];const B=t=>t[6].uid;for(let r=0;r<F.length;r+=1){let e=q(t,F,r),o=B(e);T.set(o,O[r]=H(o,e))}return{c(){e=u(),o=d("div"),n=d("h1"),a=M("Todos"),s=u(),l=d("form"),c=d("input"),y=u();for(let t=0;t<O.length;t+=1)O[t].c();this.h()},l(t){P('[data-svelte="svelte-181o7gf"]',document.head).forEach(m),e=p(t),o=f(t,"DIV",{class:!0});var r=h(o);n=f(r,"H1",{});var i=h(n);a=$(i,"Todos"),i.forEach(m),s=p(r),l=f(r,"FORM",{class:!0,action:!0,method:!0});var d=h(l);c=f(d,"INPUT",{name:!0,placeholder:!0,class:!0}),d.forEach(m),y=p(r);for(let e=0;e<O.length;e+=1)O[e].l(r);r.forEach(m),this.h()},h(){document.title="Todos",v(c,"name","text"),v(c,"placeholder","+ tap to add a todo"),v(c,"class","svelte-13wdnuf"),v(l,"class","new svelte-13wdnuf"),v(l,"action","/todos.json"),v(l,"method","post"),v(o,"class","todos svelte-13wdnuf")},m(r,d){g(r,e,d),g(r,o,d),w(o,n),w(n,a),w(o,s),w(o,l),w(l,c),w(o,y);for(let t=0;t<O.length;t+=1)O[t].m(o,null);j=!0,x||(E=b(i=S.call(null,l,{result:t[2]})),x=!0)},p(t,[e]){if(i&&r(i.update)&&1&e&&i.update.call(null,{result:t[2]}),3&e){F=t[0],I();for(let t=0;t<O.length;t+=1)O[t].r();O=_(O,e,B,1,t,F,T,o,R,H,null,q);for(let t=0;t<O.length;t+=1)O[t].a();k()}},i(t){if(!j){for(let t=0;t<F.length;t+=1)N(O[t]);j=!0}},o(t){for(let e=0;e<O.length;e+=1)U(O[e]);j=!1},d(t){t&&m(e),t&&m(o);for(let e=0;e<O.length;e+=1)O[e].d();x=!1,E()}}}var J=function(t,e,o,n){return new(o||(o=Promise))((function(a,s){function r(t){try{c(n.next(t))}catch(e){s(e)}}function l(t){try{c(n.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,l)}c((n=n.apply(t,e||[])).next())}))};const K=({fetch:t})=>J(void 0,void 0,void 0,(function*(){const e=yield t("/todos.json");if(e.ok){return{props:{todos:yield e.json()}}}const{message:o}=yield e.json();return{error:new Error(o)}}));function Q(t,e,o){var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))((function(a,s){function r(t){try{c(n.next(t))}catch(e){s(e)}}function l(t){try{c(n.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,l)}c((n=n.apply(t,e||[])).next())}))};let{todos:a}=e;return t.$$set=t=>{"todos"in t&&o(0,a=t.todos)},[a,function(t){return n(this,void 0,void 0,(function*(){const e=yield t.json();o(0,a=a.map((t=>t.uid===e.uid?e:t)))}))},async(t,e)=>{const n=await t.json();o(0,a=[...a,n]),e.reset()},(t,e)=>{const n=!!e.get("done");o(0,a=a.map((e=>e===t?s(s({},e),{done:n}):e)))},t=>{o(0,a=a.filter((e=>e.uid!==t.uid)))}]}export default class extends l{constructor(t){super(),c(this,t,Q,V,i,{todos:0})}}export{K as load};
